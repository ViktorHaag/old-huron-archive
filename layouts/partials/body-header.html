{{- $badge_image := .Param "badge_image" | default "{{ .Site.BaseURL }}img/badge.png" -}}
<header class="top-menu">
  <nav class="top-menu">
    <ul>
      {{ if $badge_image -}}
        {{- $badge_image := (trim $badge_image "/") | absURL -}}
        <li><a href="{{ .Site.BaseURL }}"><img class="badge" src="{{ $badge_image }}" alt="{{ .Site.Title }}"></a></li>
      {{ end -}}
        {{- $currentNode := . -}}
        {{- if .Site.Menus.main -}}
        <li>&nbsp;&nbsp;</li>
        {{- range sort .Site.Menus.main.Sort.Reverse }}
          <li><a href="{{ .URL }}" title="{{ .Name }} page"{{ if or ($currentNode.IsMenuCurrent "main" .) ($currentNode.HasMenuCurrent "main" .) }} class="active"{{ end }}>{{ .Name }}</a></li>
        {{- end -}}
      {{- end }}
    </ul>
  </nav>
</header>
